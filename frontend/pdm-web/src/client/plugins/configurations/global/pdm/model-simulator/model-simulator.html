<div class="progress" *ngIf="showProgress">
    <div class="progress-bar progress-bar-striped active" role="progressbar" attr.aria-valuenow="{{percentage}}" aria-valuemin="0"
        aria-valuemax="100" [ngStyle]="{width: percentage+'%'}">
        {{percentage}}%
    </div>
</div>
<div class="model-simulator">
    <div a3-spinner #componentSpinner [type]="'component'"></div>



    <split direction="vertical" [gutterSize]="3">
        <split-area size="70">

            <split direction="horizontal" [gutterSize]="3">
                <split-area size="20" class='condition'>
										<div class="option">
											<div>Options</div>
											<label>
													<input type="radio" name="eventType" [(ngModel)]="eventType" value="event"> Event Base
											</label>
											<label>
													<input type="radio" name="eventType" [(ngModel)]="eventType" value="time"> Time Base
											</label>
										</div>	
                    <div class="a3-from-to" [from]="searchTimePeriod?.from" [to]="searchTimePeriod?.to" [format]="'yyyy/MM/dd hh:mm:ss'" (changedFromTo)="fromToChange($event)"></div>
                    <div class="eqp-tree">
                        <fab-area-eqp-param-tree (changeParamSelection)="nodeClick($event)" #tree></fab-area-eqp-param-tree>
                    </div>
                    <button class="btn btn-primary" [ngClass]="{candoit:treeParamSelect}" (click)="drawChart()" [disabled]='this.showProgress||treeParamSelect==false'>Draw Chart</button>
                    <button class="btn btn-primary" [ngClass]="{candoit:canDrawEvent && selectedParam}" (click)="drawEvent()" [disabled]='canDrawEvent==false  || this.showProgress || selectedParam==false'>Draw Event</button>
                    <button class="btn btn-primary" [ngClass]="{candosave:canDrawEvent && selectedParam}" (click)="save()" [disabled]='canDrawEvent==false  || this.showProgress || selectedParam==false'>Save</button>

                </split-area>
                <split-area size="80" class="chart">
                    <div class="chart-container">
                        <modeling-chart #modelChart [eqpEvents]="eqpEvents" [params]="paramDatas" [xMin]="xMin" [xMax]="xMax" [eventLines]="eventLines" (selectParam)="selectParam($event)"></modeling-chart >
                    </div>
                </split-area>

            </split>

        </split-area>
        <split-area size="30">
            <split direction="horizontal" [gutterSize]="3">
                <split-area size="20" class='condition'>
                    <div class="a3-from-to" [from]="searchTimePeriod2?.from" [to]="searchTimePeriod2?.to" [format]="'yyyy/MM/dd hh:mm:ss'" (changedFromTo)="fromToChange2($event)"></div>
                    <div class="eqp-tree">
                        <fab-area-eqp-param-tree (changeParamSelection)="nodeClick2($event)" #tree2></fab-area-eqp-param-tree>
                    </div>
                    <div class="aggregation">
                        <label>Ad-Hoc Functions</label>
                        <div *ngFor="let item of aggregations; let i=index">
                            <label>
                                <input type="checkbox" [(ngModel)]="item.checked" (change)="clickCheck()"> {{item.f}}
                            </label>
                        </div>
                    </div>
                    <div class="aggregation" *ngIf="eventType=='time'">
                        <div>Aggregation Time</div>
                        <input class="form-control"type="number" [(ngModel)]="aggregationTime">
                        <label>minutes</label>
                    </div>
                    <button class="btn btn-primary" [ngClass]="{candoit:canDrawAdHoc&& aggregationChecked && tree2ParamSelect}" (click)="adHocSummary()"
                        [disabled]='canDrawAdHoc==false || this.showProgress || aggregationChecked==false || tree2ParamSelect==false'>Ad-Hoc Summary</button>
                </split-area>
                <split-area size="80" class='condition'>
                    <div class="chart-container">
                        <modeling-simulator-chart #simulationChart [params]="simulation_params" [xMin]="searchTimePeriod2.from" [xMax]="searchTimePeriod2.to"></modeling-simulator-chart>
                    </div>

                </split-area>
            </split>

        </split-area>
    </split>

</div>